{% extends 'homepage/index.html' %}
{% block title %}Perfil del usuario{% endblock %}
{% load custom_filters %}
{% load humanize %}
{% block css %}<link rel="stylesheet"href="{{ MEDIA_URL }}css/nutricionista/perfilUsuarios.css">{% endblock %}
{% block js %}
<script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}js/adquiridos/jquery-1.8.1.min.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/adquiridos/popup.js"></script>
<script src="{{ MEDIA_URL }}js/propios/tamanoLetra.js"></script>
<script src="{{ MEDIA_URL }}js/propios/fichaAntropometrico.js"></script>
<script>

</script>
{% endblock %}
{% block content %}
{% if usuario %}
	{% if nombre.count > 2 %}
	
	<div class="tituloResultado">Lista de Pacientes</div>
	<div class="fondoLista">
		<div class="linea"style="font-weight:bold;text-transform:uppercase !important;border:0;margin-bottom:15px;margin-top:12px;">
			<div class="nombrePaciente"style="text-transform:uppercase !important;">Nombre</div>
			<div class="edadPaciente">Edad</div>
			<div class="generoPaciente">Género</div>
		</div>
		{% for n in nombre %}
		<div class="linea" >
			<div class="nombrePaciente">
				<a href="?user={{ n.id }}">{{ n.get_full_name }}</a>
			</div>
			<div class="edadPaciente"> {{ usuario|au_getFechaNaciemiento:n.id|calculate_age }} </div>
			<div class="generoPaciente">
				{% if usuario|au_getGenero:n.id == "m" %}
				Masculino
				{% elif usuario|au_getGenero:n.id == "f" %}
				Femenino
				{% else %}
				Otro
				{% endif %}
			</div>
		</div>
		{% endfor %}
	</div> 
	{% else %}
		{% if tipo|get_int == 0 %}
			{% for n in nombre %}
			<div id="titulo"> Datos generales del paciente </div>
			<div class = "cuadrar">
			<br />
				<div class= "cuadro_paciente">  
						<div class="dato" >Nombre: {{n.get_full_name|cap }} </div>
						<div class="dato" >Edad: {{ usuario|au_getFechaNaciemiento:n.id|calculate_age }} </div>
						<div class="dato" >Cedula:{{ usuario|au_getCedula:n.id}} </div>
						<div class="dato" >Género: 
								{% if usuario|au_getGenero:n.id == "m" %}
									Masculino
								{% elif usuario|au_getGenero:n.id == "f" %}
									Femenino
								{% else %}
									Otro
								{% endif %}
						</div>                                    
				</div>
			</div>
			<div class="opcionResultado">Resultados del paciente</div>
			   <ul class="resultados"> 
				<li><a href="?user={{ n.id }}&p=1"><div class="opcionResultado">Antropométricos</div></a></li>
				<li><a href="?user={{ n.id }}&p=2"><div class="opcionResultado">IPAQ</div></a></li>
				<li><a href="?user={{ n.id }}&p=3"><div class="opcionResultado">Frecuencia de consumo</div></a></li>
				<li><a href="?user={{ n.id }}&p=4"><div class="opcionResultado">Recordatorio de 24 horas</div></a></li>
				<li><a href="?user={{ n.id }}&p=5"><div class="opcionResultado">Indicadores dietéticos</div></a></li></ul>
			{% endfor %}
		{% elif tipo|get_int == 1 %}
			{% for n in nombre %}
			<div class="perfilDe divbold"style="margin-bottom:15px;">Perfil antropometrico de {{n.get_full_name|cap}}</div>
			{% if perfil.0 %}
				{% for p in perfil %}
					<div class="contenedorPerfil">
						<div class="perfilN">Perfil del {{ p.fecha_creacion|date:"d/m/Y" }}:</div>
						<div class="fila">
							<div class="valor divbold" >Cálculo</div>
							<div class="calculoValor divbold">Valor </div>
							<div class ="rango divbold">Apreciación </div>
						</div>
						<div class="fila">
							<div class="valor" >Metabolismo Basal</div>
							<div class="calculoValor">{{ p.metabolismobasal }}</div>
							<div class ="rango">Normal </div>
						</div>
						<div class="fila">
							<div class="valor" >Indice de Adiposidad</div>
							<div class="calculoValor">{{ p.indiceadiposidad }}</div>
							<div class ="rango">Normal </div>
						</div>
						<div class="fila">
							<div class="valor" >Obesidad</div>
							<div class="calculoValor">{{ p.obesidad }}</div>
							<div class ="rango">Normal </div>
						</div>
<a id="plusinfo" href="#" onclick="cargarContenido('{{n.get_full_name|cap}}','{{p.fecha_creacion|date:"d/m/Y"}}','{{p.peso|floatformat:0|intcomma}}','{{p.circunferencia_cintura|floatformat:0|intcomma}}','{{p.circunferencia_cadera|floatformat:0|intcomma}}','{{p.estatura|floatformat:0|intcomma}}','{{p.hipertencion}}','{{p.diabetes}}','{{p.cancer}}','{{p.trigliceridos}}')">
							<div id="masinfo">
								+
							</div>
						</a>
						<!--  POPUP para mayor información  -->
						<div id="pop">
							<div id="cerrar">
								<a style="TEXT-DECORATION: none" href="javascript:setVisible('pop')">X</a></div>
							<div id="info">
								<p>Contenido: aquí</p>
							</div>
						</div>
						<!-- fin POPUP -->						
					</div>
				{% endfor %}
			{% else %}
			<div id="aviso">
					<span aria-hidden="true">!</span>
       				<p>Este usuario todavía no posee una frecuencia de consumo.</p>
       		</div>
       		{% endif %}
			{% endfor %}
		{% elif tipo|get_int == 2 %}
			{% for n in nombre %}
				{% for p in perfil %}
				<div>ipaq</div>
				<a href="?user={{ n.id }}&d=1"> Descargar como documento Excel </a>
				<div class="titulo">Trabajo</div>
				<table style="width:800px" border="1">
					<th>Min Andar</th>
					<th>Min actividad Moderada</th>	
					<th>Min actividad Vigorosa</th>
					<th>MET Andar</th>
					<th>MET Moderado</th>
					<th>MET Vigoroso</th>
					<th>MET Total</th>
				<tr>
					<td>{{p.minAndarTrabajo}}</td>
					<td>{{p.minModeradoTrabajo}}</td>
					<td>{{p.minVigorosoTrabajo}}</td>
					<td>{{p.metAndarTrabajo}}</td>
					<td>{{p.metModeradoTrabajo}}</td>
					<td>{{p.metVigorosoTrabajo}}</td>
					<td>{{p.metTrabajo}}</td>
				</tr>
				</table>
				<div class="titulo">Transporte</div>						
				<table style="width:800px" border="1">
					<th>Min Andar</th>
					<th>Min actividad Moderada</th>	
					<th>Min en Vehículo</th>
					<th>MET Andar</th>
					<th>MET Moderado</th>
					<th>MET Total</th>
				<tr>
					<td>{{p.minAndarTransporte}}</td>
					<td>{{p.minModeradoTransporte}}</td>
					<td>{{p.minVehiculo}}</td>
					<td>{{p.metAndarTransporte}}</td>
					<td>{{p.metModeradoTransporte}}</td>
					<td>{{p.metTransporte}}</td>
				</tr>
				</table>	
				<div class="titulo">Hogar</div>
				<table style="width:800px" border="1">
					<th>Min actividad Vigorosa</th>
					<th>Min A. Moderada en Casa</th>	
					<th>Min A. Moderada en Jardín</th>
					<th>MET Vigoroso</th>
					<th>MET Moderado en Casa</th>
					<th>MET Moderado en Jardín</th>
					<th>MET Total</th>
				<tr>
					<td>{{p.minVigorosoHogar}}</td>
					<td>{{p.minModeradoHogar}}</td>
					<td>{{p.minModeradoJHogar}}</td>
					<td>{{p.metVigorosoHogar}}</td>
					<td>{{p.metModeradoHogar}}</td>
					<td>{{p.metModeradoJHogar}}</td>
					<td>{{p.metHogar}}</td>
				</tr>
				</table>
				<div class="titulo">Recreación</div>
				<table style="width:800px" border="1">
					<th>Min Andar</th>
					<th>Min actividad Moderada</th>	
					<th>Min actividad Vigorosa</th>
					<th>MET Andar</th>
					<th>MET Moderado</th>
					<th>MET Vigoroso</th>
					<th>MET Total</th>
				<tr>
					<td>{{p.minAndarRecre}}</td>
					<td>{{p.minModeradoRecre}}</td>
					<td>{{p.minVigorosoRecre}}</td>
					<td>{{p.metAndarRecreacion}}</td>
					<td>{{p.metModeradoRecreacion}}</td>
					<td>{{p.metVigorosoRecreacion}}</td>
					<td>{{p.metRecreacion}}</td>
				</tr>
				</table>	
	
				<div class="titulo">Tiempo Sentado</div>
				<table style="width:800px" border="1">
					<th>Min Sentado</th>
					<th>Media min sentado por dia</th>	
				<tr>
					<td>{{p.tiempoSentado}}</td>
					<td>{{p.MediaSentado}}</td>
				</tr>
				</table>
				<div class="titulo">Resultados</div>						
				<table style="width:800px" border="1">
					<th>Min Andar Toral</th>
					<th>Min actividad Moderada Total</th>	
					<th>Min actividad Vigorosa Total</th>
					<th>MET Total en todas las areas</th>
					<th>Resultado Actividad Física</th>
					
				<tr>
					<td>{{p.tiempoAndar}}</td>
					<td>{{p.tiempoModerado}}</td>
					<td>{{p.tiempoVigoroso}}</td>
					<td>{{p.metTotal}}</td>
					<td>{{p.apreciacionIpaq}}</td>
				</tr>
				</table>																			
				{% endfor %}
			
			{% endfor %}
		{% elif tipo|get_int == 3 %}
			{% for n in nombre %}
				<div class="perfilDe divbold">Frecuencia de consumo de {{n.get_full_name|cap}}
					<div id="contenedorBarra">Barra de progreso: <progress id="bar" value="{{perfil.0.progreso}}" max="9"><span>{{perfil.0.progreso}}/8 secciones</span></progress></div>
				</div>
				<div class="tamanoLetra">
					<div class="increaseFont botonFont">A</div>
					<div class="decreaseFont botonFont">D</div>
					<div class="resetFont botonFont">R</div>
				</div>
				<div class="tablaFrecuencia ajustarFont">
				{% if perfil.0.progreso %}
					{% for p in perfil %}
						<div class="lineaFrecuencia">
							<div class="nombreAlimento">{{ p.descripcion }}</div>
							<div class="frecuenciaAlimento">
								{{ p.frecuencia|parse_frecuencia }}</div>
							<div class="porcionAlimento">{{ p.porcion|parse_porcion }}</div>
							<div class="mediaAlimento">{{ p.media }}</div>
						</div>
					{% endfor %}
				{% else %}
				<div id="aviso">
					<span aria-hidden="true">!</span>
       				<p>Este usuario todavía no posee una frecuencia de consumo.</p>
       			</div>
				{% endif %}
				</div>
			{% endfor %}
		{% elif tipo|get_int == 4 %}
		24horas
		{% elif tipo|get_int == 5 %}
		<h2>Indicadores dietéticos ingresados</h2>
			{% for p in perfil %}
			<div id="indicadores">
				<p>Comidas al día: {{p.comidasAlDia}}</p>
				<p>Quien prepara la comida: {{p.quienPreparaAlimentos}}</p>
				<p>Come entre comidas: {{p.comeEntreComidas}}</p>
				<p>Qué come entre comidas: {{p.queComeEntreComidas}}</p>
				<p>Modifico su alimentación en el último año: {{p.modificadoAlimentacionReciente}}</p>
				<p>Por qué modifico su alimentación: {{p.porqueModifico}}</p>
				<p>En que sentido lo modifico: {{p.comoModifico}}</p>
				<p>Apetito: {{p.comoSuApetito}}</p>
				<p>A que hora tiene más hambre: {{p.horaMasHambre}}</p>
				<p>Alimentos preferidos: {{p.alimentoPreferido}}</p>
				<p>Alimentos que le desagradan: {{p.alimentoDesagrado}}</p>
				<p>Es alergico a algún alimento: {{p.esAlergicoIntolerante}}</p>
				<p>Cual alimento es alergico: {{p.cualAlimento}}</p>
				<p>Agrega sal a las comidas: {{p.salComidas}}</p>
				<p>Utiliza suplementos: {{p.suplementoAlimenticio}}</p>
				<p>Cuantas veces al día: {{p.cuantasVecesSuplemento}}</p>
				<p>Porque los utiliza: {{p.porqueSuplemento}}</p>
				<p>Su consumo varia cuando esta ansioso, triste o nervioso: {{p.consumoVariaEmocion}}</p>
				<p>Cómo varia: {{p.comoVariaConsumo}}</p>
				<p>Ha realizado dietas: {{p.tieneDieta}}</p>
				<p>Cuantas dietas: {{p.cuantasVecesDieta}}</p>	 
	 			<p>Tipo de dieta: {{p.tipoDieta}}</p>
				<p>Hace cuanto tiempo: {{p.tiempoDieta}}</p>
			</div>
			{% endfor %}
		{% else %}
		No existe esa opción
		{% endif %}
			<a href="{% url nutricionista_perfilUsuarios %}" id="anterior">«</a>
	{% endif %}
{% else %}
error.
{% endif %}

{% endblock %}